% \definecolor{figcolor}{HTML}{F2F2FF}
\definecolor{figcolor}{HTML}{F2F2F2}
\definecolor{ugentblue}{RGB}{10,30,96}
\definecolor{lightblue}{HTML}{1E90FF} % C0
\definecolor{lightred}{HTML}{D62728} % C1
\definecolor{mplgrey}{gray}{0.5} % "grey" in matplotlib
\definecolor{lgrey}{gray}{0.8} % "grey" in matplotlib

\newcommand{\colorcode}{(Color code on page \pageref{colorcode}.)\xspace}

%% Index labels.
% To avoid multiply-defined labels, but allow multiple pages in the index, use e.g. \idx[nolabel]{...} after the first \idx{...}.
% To link to the section header instead of the word, use e.g. \idx[tosection]{...}
\makeatletter
\newcommand{\indexlabel}[2][]{%
	\index{#2}%
	\ifthenelse{\equal{#1}{nolabel}}{}{%
		\ifthenelse{\equal{#1}{tosection}}{}{%
			\phantomsection
			\def\@currentlabel{\unexpanded{#2}}%
		}%
		\label{#2}\label{#2s}%
	}%
}
\makeatother
\newcommand{\idx}[2][]{\emph{#2}\indexlabel[#1]{#2}} %no xspace
\newcommand{\xlabel}[2][]{#2\indexlabel[#1]{#2}}
%% Index references.
\newcommand{\xref}[1]{#1\xspace}
\newcommand{\xrefs}[2]{#1#2\xspace} %% meervoud etc, add {s}
\newcommand{\link}[2]{#2\xspace}

\newcommand{\jonathanskip}{\smallskip}
\newcommand{\numberthis}{\addtocounter{equation}{1}\tag{\theequation}} % Numbers a single line in a no-numbering multiline equation* or align*
\newcommand{\numeq}[2]{\stackrel{\scriptscriptstyle(\mkern-1.5mu#1\mkern-1.5mu)}{#2}} % Number above mathematical symbol (usage: \numeq{<eq_number>}{<symbol>})

%\newcommand{\debug}[1]{}
%\newcommand{\debug}[1]{{\tiny{(\pageref{#1})}}\normalsize}

\newcommand{\crefSubFigRef}[2]{\namecref{#1}~\hyperref[#1]{\ref{#1}#2}}
\newcommand{\ccite}[2][]{Ref.~\cite[#1]{#2}} % Ref. [1] instead of [1]
\newcommand{\Py}{\xref{permalloy}}
%%vector
% \newcommand{\vc}[1]{\textbf{#1}}
\newcommand{\vc}[1]{\boldsymbol{\mathbf{#1}}} % Use this instead of \vb, which is deprecated anyway alongside the "physics" package
\newcommand{\circled}[1]{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {#1}}}}
\newcommand{\sub}[1]{\ensuremath{_{\mathrm{#1}}}}
\newcommand{\super}[1]{\ensuremath{^{\mathrm{#1}}}}
\newcommand{\tpar}[1]{\frac{\partial #1}{\partial t}}%partial derivative to time
\newcommand{\tder}[1]{\frac{\mathrm{d} #1}{\mathrm{dt}}}%full derivative to time

\newcommand{\EB}{E_\mathrm{B}}
\newcommand{\EBeff}{\widetilde{\EB}}
\newcommand{\EBeffLeft}{\EBeff{}_{,\circlearrowleft}}
\newcommand{\EBeffRight}{\EBeff{}_{,\circlearrowright}}
\newcommand{\EEA}{E_\mathrm{EA}}
\newcommand{\EMC}{E_\mathrm{MC}}
\newcommand{\kB}{\ifmmode k_\mathrm{B} \else $k_\mathrm{B}$ \fi}
\newcommand{\kBT}{\ifmmode k_\mathrm{B}T \else $k_\mathrm{B}T$ \fi}
\newcommand{\clockwise}{\boldsymbol{\circlearrowright}}
\newcommand{\counterclockwise}{\boldsymbol{\circlearrowleft}}
\newcommand{\rmin}{r_\mathrm{min}}
\newcommand{\bigmu}{\makebox{\Large\ensuremath{\upmu}}}
\newcommand{\mavg}{m_\mathrm{avg}}
\newcommand{\qNN}[1][]{q_\mathrm{#1NN}} % Usage: \qNN, \qNN[2], ...
\newcommand{\MSE}{\mathrm{MSE}}

\newcommand{\bigsum}{\mathop{\scalebox{2}{\(\sum\)}}}
\newcommand{\bigprod}{\mathop{\scalebox{2}{\(\prod\)}}}
\newcommand{\llangle}{\langle\hspace{-0.7mm}\langle}
\newcommand{\rrangle}{\rangle\hspace{-0.7mm}\rangle}
\newcommand{\greybox}{\raisebox{-.1ex}{\ensuremath{\mathcolor{lgrey}{\blacksquare}}}}
\newcommand{\diff}[2]{\frac{\partial #1}{\partial #2}}			    %% derivative
\newcommand{\dispdiff}[2]{{\partial #1}/{\partial #2}}			    %% derivative
\newcommand{\difff}[2]{\frac{\partial^2 #1}{\partial #2^2}}			%% second derivative
\newcommand{\ddt}[1]{\ensuremath{\partial #1 / \partial t}}
%\newcommand{\d}{\ensuremath{\mathrm{d}}}
\newcommand{\ddiff}[2]{\frac{\d #1}{\d #2}}
\newcommand{\lapl}{\ensuremath{{\Delta}}}
\newcommand{\eqdef}{\stackrel{\small{\mathrm{def}}}{=}}
\newcommand{\inprod}{\cdot}
\newcommand{\bcdot}{\boldsymbol{\cdot}}
\renewcommand{\quote}[1]{``#1''}
\newcommand{\etal}{\textit{et al.}\xspace}

\newcommand{\code}[1]{\textsf{#1}}
\newcommand{\shell}[1]{{\texttt{#1}}\smallskip\\}
\newcommand{\python}[1]{\lstinline{#1}}

\newcommand{\hide}[1]{}

\newcommand{\glijbaantje}[2]{\vspace{-0.5cm}\begin{flushright}{``\!\textit{#1}''\\--- #2\\}\vspace{0.5cm}\end{flushright}}
\newcommand{\publicatie}[1]{Material from this chapter has also been published in \cite{#1}.}

\newcommand{\mumax}{mumax\textsuperscript{3}\xspace}
\newcommand{\mumaxplus}{mumax\textsuperscript{+}\xspace}
\newcommand{\oommf}{\textsc{oommf}\xspace}
\newcommand{\nmag}{Nmag\xspace}
\newcommand{\hotspice}{\textsc{Hotspice}\xspace}
\newcommand{\spinengine}{SpinENGINE\xspace}

%%%% EXTRA SYMBOLS
\DeclareSymbolFont{extraitalic}      {U}{zavm}{m}{it}
\DeclareMathSymbol{\Qoppa}{\mathord}{extraitalic}{161}
\DeclareMathSymbol{\qoppa}{\mathord}{extraitalic}{162}
\DeclareMathSymbol{\Sampi}{\mathord}{extraitalic}{165}
\DeclareMathSymbol{\sampi}{\mathord}{extraitalic}{166}
\DeclareMathSymbol{\Stigma}{\mathord}{extraitalic}{167}
\DeclareMathSymbol{\stigma}{\mathord}{extraitalic}{168}

\newcommand{\eqn}[1]{equation \ref{#1}\xspace}
\newcommand{\secateur}[1]{section \ref{#1} (page \pageref{#1})\xspace}
\newcommand{\figuur}[1]{figure \ref{#1} (page \pageref{#1})\xspace}
\newcommand{\Figuur}[1]{Figure \ref{#1} (page \pageref{#1})\xspace}

%%%% TIKZ fading effect for coverpage
\tikzfading[name=fade l,left color=transparent!100,right color=transparent!0]
\tikzfading[name=fade r,right color=transparent!100,left color=transparent!0]
\tikzfading[name=fade d,bottom color=transparent!100,top color=transparent!0]
\tikzfading[name=fade u,top color=transparent!100,bottom color=transparent!0]
\newcommand\fadenode[2][10pt]{ % opt. arg. is fade radius; mand. arg. is node name to frame
	\fill[white,path fading=fade u] (#2.south west) rectangle ($(#2.south east)+(0, #1)$);
	\fill[white,path fading=fade d] (#2.north west) rectangle ($(#2.north east)+(0,-#1)$);
	\fill[white,path fading=fade l] (#2.south east) rectangle ($(#2.north east)+(-#1,0)$);
	\fill[white,path fading=fade r] (#2.south west) rectangle ($(#2.north west)+( #1,0)$);
} % From https://tex.stackexchange.com/a/222850

%%%% FIGURES ETC.
\newcommand{\kolommen}[2]{
	\begin{minipage}{0.445\textwidth}
		#1
	\end{minipage}
	\begin{minipage}{0.445\textwidth}
		#2
	\end{minipage}
	\smallskip
}

\newcommand{\smallfig}[3]{
	\smallskip
	\begin{center}
		\includegraphics[width=#1\linewidth]{#2}\footnotesize{\\\textsf{(#3)}}
	\end{center}
	\smallskip
}

% 2 args: caption, tabular environment
% 1 optional arg: label
\newcommand{\xtable}[3][nolabel]{
	\jonathanskip\vspace{1em}
	\begin{tikzpicture}
		\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
			\begin{minipage}{0.939\linewidth}
		  		\centering
		  		\textsf{\tabcaption{#2\label{#1}}}
		  		{\sf
					#3
				}
			\end{minipage}
		};
	\end{tikzpicture}
	\jonathanskip\vspace{0.05cm}
}

% 2 args: filename, caption
% 1 optional arg: width
\newcommand{\xfig}[3][1]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}{0.945\linewidth}
					\centering
					\includegraphics[width=#1\textwidth]{#2}
					\textsf{\caption{#3\label{#2}}}
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}
}

% 5 args: filename1, caption1, filename2, caption2, overallcaption
% 1 optional arg: width of subfigures
\newcommand{\xfigs}[6][0.45]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}{0.945\linewidth}
					\centering
					\begin{tabular}{cc}
						\small\parbox[c]{0.47\linewidth}{\centering\textsf{\textbf{(a)} #3}} & 
						\small\parbox[c]{0.47\linewidth}{\centering\textsf{\textbf{(b)} #5}}\normalsize \\
						\includegraphics[width=#1\linewidth]{#2} & 
						\includegraphics[width=#1\linewidth]{#4} \\
					\end{tabular}
					\textsf{\caption{#6\label{#2}}} % Ensure compatibility with hypcap
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}
}

% 3 args: filename1, filename2, caption
% 1 optional arg: width of subfigures
\newcommand{\xfigsnocap}[4][0.45]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}{0.945\linewidth}
					\centering
					\begin{tabular}{cc}
						\includegraphics[width=#1\linewidth]{#2} & 
						\includegraphics[width=#1\linewidth]{#3} \\
					\end{tabular}
					\textsf{\caption{#4\label{#2}}} % Ensure compatibility with hypcap
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}
}

% 2 args: filename, caption
% 1 optional arg: width of subfigures
\newcommand{\sidefig}[3][0.5]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}[c]{#1\textwidth}
					\centering
					\includegraphics[width=\textwidth]{#2}
				\end{minipage}
				\hspace{0.01\textwidth}
				\begin{minipage}[c]{\fpeval{1 - 0.083 - #1}\textwidth}
					\centering\vspace{-1.5em}
					\textsf{\caption{\justifying #3\label{#2}}} % Ensure compatibility with hypcap
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}
}

% 2 args: filename1, filename2, caption
% 1 optional arg: width of figure (in textwidth units, default 0.5)
\newcommand{\sidefigs}[4][0.5]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}[c]{#1\textwidth}
					\centering
					\includegraphics[width=\textwidth]{#2}\\[1.5em]
					\includegraphics[width=\textwidth]{#3}
				\end{minipage}
				\begin{minipage}[c]{\fpeval{1 - 0.065 - #1}\textwidth}
					\centering\vspace{-1.5em}
					\textsf{\caption{\justifying #4\label{#2}}} % Ensure compatibility with hypcap
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}%
}

% 2 args: includegraphics calls etc., caption
\newcommand{\makeshiftfig}[2]{
	\jonathanskip\vspace{1em}
	\begin{figure}[H] % Use the figure environment for compatibility
		\centering
		\begin{tikzpicture}
			\node[rounded corners=10pt, fill=figcolor, inner sep=10pt] (figbox) {
				\begin{minipage}{0.945\linewidth}
					\centering
					#1
					\textsf{\caption{#2}} % Ensure compatibility with hypcap
				\end{minipage}
			};
		\end{tikzpicture}
	\end{figure}
	\jonathanskip\vspace{0.05cm}
}


%%%% FIGURES BELOW HERE WERE NOT USED NOR ADJUSTED TO MODERN FORM (YET?)
\newcommand{\sidefigbig}[3][1]{
	\jonathanskip
	\colorbox{figcolor}{
	\begin{minipage}[c]{0.65\textwidth}
  		\centering
  		\includegraphics[width=#1\textwidth]{#2}
	\end{minipage}
	\begin{minipage}[c]{0.325\linewidth}
	 \textsf{\figcaption{#3\label{#2}}}
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}

\newcommand{\sidefigr}[3][1]{
	\jonathanskip
	\colorbox{figcolor}{
	\begin{minipage}[c]{0.455\linewidth}
	 \textsf{\figcaption{#3\label{#2}}}
	\end{minipage}
	\begin{minipage}[c]{0.5\textwidth}
  		\centering
  		\includegraphics[width=#1\textwidth]{#2}
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}

\newcommand{\xfigssmallbig}[6][unused]{
	\jonathanskip
\colorbox{figcolor}{
	\begin{minipage}{0.945\linewidth}
  		\centering
		\begin{tabular}{cc}
		\small\parbox[c]{0.32\linewidth}{\textsf{\textbf{(a)} #3}} & \small\parbox[c]{0.62\linewidth}{\textsf{\textbf{(b)} #5}}\normalsize\\
		\includegraphics[width=0.3\linewidth]{#2} & \includegraphics[width=0.6\linewidth]{#4}\\
		\end{tabular}
		\textsf{\figcaption{#6\label{#2}}}
  	
	\end{minipage}
	
}\jonathanskip\vspace{0.05cm}}

\newcommand{\xfigssize}[8][unused]{
	\jonathanskip
\colorbox{figcolor}{
	\begin{minipage}{0.945\linewidth}
  		\centering
		\begin{tabular}{cc}
		\small\parbox[c]{#7\linewidth}{\textsf{\textbf{(a)} #3}} & \small\parbox[c]{#8\linewidth}{\textsf{\textbf{(b)} #5}}\normalsize\\
		\includegraphics[width=#7\linewidth]{#2} & \includegraphics[width=#8\linewidth]{#4}\\
		\end{tabular}
		\textsf{\figcaption{#6\label{#2}}}
  	
	\end{minipage}
	
}\jonathanskip\vspace{0.05cm}}

\newcommand{\xfigss}[8][0.45\textwidth]{
	%\\[\intextsep]
	\jonathanskip
	\colorbox{figcolor}{
	\begin{minipage}{\linewidth}
  		\centering
		\begin{tabular}{ccc}
		\small\parbox{0.3\linewidth}{\textsf{\textbf{(a)} #3}} & \parbox{0.3\linewidth}{\textsf{\textbf{(b)} #5}} & \parbox{0.3\linewidth}{\textsf{\textbf{(c)} #7}}\normalsize \\
		\includegraphics[width=0.3\linewidth]{#2} & \includegraphics[width=0.3\linewidth]{#4}& \includegraphics[width=0.3\linewidth]{#6}\\
		\end{tabular}
		\textsf{\figcaption{#8\label{#2}}}
  	
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}

\newcommand{\xfigsss}[9]{
	%\\[\intextsep]
	\jonathanskip
\colorbox{figcolor}{
	\begin{minipage}{0.95\linewidth}
  		\centering
		\begin{tabular}{cccc}
		\small\parbox{0.23\linewidth}{\textsf{\textbf{(a)} #2}} & \small\parbox{0.23\linewidth}{\textsf{\textbf{(b)} #4}} & \small\parbox{0.23\linewidth}{\textsf{\textbf{(c)} #6}} & \small\parbox{0.23\linewidth}{\textsf{\textbf{(d)} #8}} \normalsize\\
		\includegraphics[width=0.23\linewidth]{#1} & \includegraphics[width=0.23\linewidth]{#3} & \includegraphics[width=0.23\linewidth]{#5}& \includegraphics[width=0.23\linewidth]{#7}\\
		\end{tabular}
		
		\textsf{\figcaption{#9\label{#1}}}
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}

\newcommand{\moviefour}[5]{
	%\\[\intextsep]
	\jonathanskip
\colorbox{figcolor}{
	\begin{minipage}{0.95\linewidth}
  		\centering
			\includegraphics[width=0.21\linewidth]{#1} \hspace{0.1cm} \includegraphics[width=0.21\linewidth]{#2} \hspace{0.1cm} \includegraphics[width=0.21\linewidth]{#3} \hspace{0.1cm} \includegraphics[width=0.21\linewidth]{#4} \hspace{0.1cm}
		%\vspace{-1cm}
		\textsf{\figcaption{#5\label{#1}}}
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}


\newcommand{\gridfour}[6]{
	%\\[\intextsep]
	\jonathanskip
\colorbox{figcolor}{
	\begin{minipage}{#6\linewidth}
  		\centering
			\includegraphics[width=0.46\linewidth]{#1} \hspace{0.1cm} \includegraphics[width=0.46\linewidth]{#2} \hspace{0.1cm}\\ \includegraphics[width=0.46\linewidth]{#3} \hspace{0.1cm} \includegraphics[width=0.46\linewidth]{#4} \hspace{0.1cm} 
		
		\textsf{\figcaption{#5\label{#1}}}
	\end{minipage}
	}
	\jonathanskip\vspace{0.05cm}
}

\newcommand{\cols}[2]{\parbox{0.5\linewidth}{#1}\parbox{0.5\linewidth}{#2}}
